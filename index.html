<!DOCTYPE html>
<html>
<head>
    <title>Styled Maps - Night Mode</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
            height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #floating-panel {
            position: absolute;
            top: 10px;
            right: 0%;
            z-index: 5;
            background-color: #fff;
            padding: 5px;
            border: 1px solid #999;
            text-align: center;
            font-family: 'Roboto','sans-serif';
            line-height: 30px;
            padding-left: 10px;
        }
    </style>
</head>
<body>
<div id="floating-panel">
    <table>
        <thead><tr><th>Centre Name</th><th>Centre Marker</th><th>Waiting Time</th></tr></thead>
        <tbody>
            <tr><td>UCC-1</td><td>A</td><td>67 minutes</td></tr>
            <tr><td>UCC-2</td><td>B</td><td>78 minutes</td></tr>
        </tbody>

    </table>

</div>
<div id="map"></div>



<script>
    var map, heatmap;

    const data =
    {
        "UCC-1": {
        "co-ords": {
            "lat": 52.59972, "lng": -2.09556
        },
        "postcode": "AB1 2CD",
        "waiting-times": {
            "1min": 34,
            "10min": 20,
            "30min": 54,
            "60min": 32
    }
  },
  "UCC-2": {
        "co-ords": {
            "lat": 52.60799,
            "lng": -2.18822
        },
        "postcode": "AB1 2CD",
        "waiting-times": {
            "1min": 78,
            "10min": 20,
            "30min": 54,
            "60min": 32
        }
    }
};

    function initMap() {
        // Styles a map in night mode.
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 52.59972, lng: -2.09556},
            zoom: 12,
            zoomControl: false,
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            fullscreenControl: false,
            styles: [
                {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
                {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
                {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
                {
                    featureType: 'administrative.locality',
                    elementType: 'labels.text.fill',
                    stylers: [{color: '#d59563'}]
                },
                {
                    featureType: 'poi',
                    elementType: 'labels.text.fill',
                    stylers: [{color: '#d59563'}]
                },
                {
                    featureType: 'poi.park',
                    elementType: 'geometry',
                    stylers: [{color: '#263c3f'}]
                },
                {
                    featureType: 'poi.park',
                    elementType: 'labels.text.fill',
                    stylers: [{color: '#6b9a76'}]
                },
                {
                    featureType: 'road',
                    elementType: 'geometry',
                    stylers: [{color: '#38414e'}]
                },
                {
                    featureType: 'road',
                    elementType: 'geometry.stroke',
                    stylers: [{color: '#212a37'}]
                },
                {
                    featureType: 'road',
                    elementType: 'labels.text.fill',
                    stylers: [{color: '#9ca5b3'}]
                },
                {
                    featureType: 'road.highway',
                    elementType: 'geometry',
                    stylers: [{color: '#746855'}]
                },
                {
                    featureType: 'road.highway',
                    elementType: 'geometry.stroke',
                    stylers: [{color: '#1f2835'}]
                },
                {
                    featureType: 'road.highway',
                    elementType: 'labels.text.fill',
                    stylers: [{color: '#f3d19c'}]
                },
                {
                    featureType: 'transit',
                    elementType: 'geometry',
                    stylers: [{color: '#2f3948'}]
                },
                {
                    featureType: 'transit.station',
                    elementType: 'labels.text.fill',
                    stylers: [{color: '#d59563'}]
                },
                {
                    featureType: 'water',
                    elementType: 'geometry',
                    stylers: [{color: '#17263c'}]
                },
                {
                    featureType: 'water',
                    elementType: 'labels.text.fill',
                    stylers: [{color: '#515c6d'}]
                },
                {
                    featureType: 'water',
                    elementType: 'labels.text.stroke',
                    stylers: [{color: '#17263c'}]
                }
            ]
        });

        var trafficLayer = new google.maps.TrafficLayer();
        trafficLayer.setMap(map);

        heatmap = new google.maps.visualization.HeatmapLayer({
            data: makeHeatMap(),
            radius: 150,
            dissipating: true
        });
        heatmap.setMap(map);

        addCentreMarker("",map,"");
    }


    function makeHeatMap() {
            let heatdata = [];
            // console.log(data);
            for (let key in data) {
                let obj = data[key];

                heatdata.push({
                    location: new google.maps.LatLng(obj["co-ords"]["lat"], obj["co-ords"]["lng"]),
                    weight: obj["waiting-times"]["1min"]
                });
            }
            return heatdata;
        }

    function addCentreMarker(location, map, centreName){
        var marker = new google.maps.Marker({
            position: {lat: 52.59972, lng: -2.09556},
            map: map
        });
    }
</script>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAex0yoI07Akt3yAfUByXKijEZz3EbDHUY&libraries=visualization&callback=initMap"
        async defer></script>
</body>
</html>